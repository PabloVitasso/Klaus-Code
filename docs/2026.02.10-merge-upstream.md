# Upstream Merge Tracking: 2026-02-10

**Last merged commit:** `8286f6323` (2026-01-23)
**Upstream branch:** `roocode/main`
**Commits to merge:** 190

## Risk Assessment Summary

| Category  | Count | Strategy         |
| --------- | ----- | ---------------- |
| üü¢ LOW    | ~140  | Batch merge      |
| üü° MEDIUM | ~40   | Batch merge      |
| üî¥ HIGH   | ~10   | Individual merge |

## HIGH RISK Commits (Individual Review Required)

| #   | Commit      | Message                                                            | Status     |
| --- | ----------- | ------------------------------------------------------------------ | ---------- |
| 1   | `1e0fc89fa` | refactor: migrate Anthropic provider to @ai-sdk/anthropic          | ‚è≥ PENDING |
| 2   | `b8ef35280` | feat: migrate OpenAI Native provider to @ai-sdk/openai             | ‚è≥ PENDING |
| 3   | `24039c78b` | refactor: migrate AnthropicVertexHandler to AI SDK                 | ‚è≥ PENDING |
| 4   | `ca7e3b616` | feat: migrate Bedrock provider to AI SDK                           | ‚è≥ PENDING |
| 5   | `5773af8dd` | feat: Refactor OpenRouter provider to use Vercel AI SDK            | ‚è≥ PENDING |
| 6   | `b7d6e4933` | refactor: migrate OpenAI Codex to AI SDK and use Responses API     | ‚è≥ PENDING |
| 7   | `ef2fec9a2` | refactor: remove 9 low-usage providers and add retired-provider UX | ‚è≥ PENDING |
| 8   | `cf5d42e1e` | Intelligent Context Condensation v2 (#10873)                       | ‚è≥ PENDING |
| 9   | `0ff826d21` | feat(condense): improve condensation with environment details      | ‚è≥ PENDING |
| 10  | `b4b8cef85` | fix: transform tool blocks to text before condensing (EXT-624)     | ‚è≥ PENDING |

## LOW/MEDIUM RISK Commits (Batched)

The following commits have been batched for efficient merging:

- Docs, UI/UX improvements, bug fixes, chore tasks
- Settings removals (diffEnabled, fuzzyMatchThreshold, POWER_STEERING, etc.)
- Tooling updates (AI SDK package updates, version bumps)
- Provider additions (new models, wildcard MCP support)

### Batch 1: Post-condensing fixes and UI improvements

All commits after `d748de6fa` (condense v2.1) through `4438fdadc`

### Batch 2: Provider model additions and minor fixes

Fireworks, OpenAI Codex, zai-glm-4.7 models

### Batch 3: CLI and tooling updates

Version bumps, CLI releases, Linux/arm64 support

### Batch 4: Remaining LOW/MEDIUM commits

All remaining commits not in HIGH RISK category

## Klaus Code Preservation Checklist

- [ ] Claude Code provider (`src/api/providers/claude-code.ts`)
- [ ] OAuth flow (`src/integrations/claude-code/oauth.ts`)
- [ ] Tool name prefixing (`src/integrations/claude-code/streaming-client.ts`)
- [ ] `TOOL_NAME_PREFIX = "oc_"` constant
- [ ] `prefixToolName()` / `stripToolNamePrefix()` functions
- [ ] Branding: `@klaus-code/` imports
- [ ] Branding: `klaus-code` package names
- [ ] Version: `X.Y.Z-klaus.1` format

## Merge Progress

| Phase             | Status         |
| ----------------- | -------------- |
| Preparation       | ‚úÖ Complete    |
| HIGH RISK commits | ‚è≥ In progress |
| Batch merges      | ‚è≥ Pending     |
| Final integration | ‚è≥ Pending     |
| Testing           | ‚è≥ Pending     |
| Build VSIX        | ‚è≥ Pending     |

## Notes

Generated: 2026-02-10
